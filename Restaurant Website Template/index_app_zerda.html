
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zerda - Livraison de repas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        .category-active {
            border-bottom: 3px solid #f59e0b;
            color: #f59e0b;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .cart-item:hover {
            background-color: #f8f9fa;
        }
        .order-step-active {
            background-color: #f59e0b;
            color: white;
        }
        .rating-star {
            color: #f59e0b;
        }
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.5s;
        }
        .fade-enter, .fade-leave-to {
            opacity: 0;
        }
    </style>
</head>
<body>
    <div id="app" class="min-h-screen bg-gray-50">
        <!-- Header -->
        <header class="bg-white shadow-sm sticky top-0 z-50">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-utensils text-2xl text-orange-500"></i>
                    <h1 class="text-xl font-bold text-gray-800">Zerda</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button @click="toggleCart" class="relative p-2 text-gray-600 hover:text-orange-500">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span v-if="cart.items.length > 0" class="absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                            {{ cart.items.reduce((total, item) => total + item.quantity, 0) }}
                        </span>
                    </button>
                    <button v-if="!user" @click="showLoginModal = true" class="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                        Connexion
                    </button>
                    <div v-else class="relative group">
                        <button class="flex items-center space-x-2">
                            <img :src="user.avatar" class="w-8 h-8 rounded-full" alt="Profile">
                            <span class="text-gray-700">{{ user.name }}</span>
                        </button>
                        <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 hidden group-hover:block">
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Mon compte</a>
                            <a href="#" @click="viewOrderHistory" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Mes commandes</a>
                            <a href="#" @click="logout" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Déconnexion</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-6">
            <!-- Homepage -->
            <div v-if="currentView === 'home'">
                <!-- Hero Banner -->
                <div class="bg-orange-500 rounded-xl p-8 mb-8 text-white relative overflow-hidden">
                    <div class="relative z-10 max-w-lg">
                        <h2 class="text-3xl font-bold mb-4">Livraison de repas en moins de 30 minutes</h2>
                        <p class="mb-6">Commandez vos plats préférés et recevez-les rapidement chez vous ou au bureau.</p>
                        <div class="relative">
                            <input type="text" v-model="searchQuery" @input="searchProducts" placeholder="Rechercher un plat..." class="w-full px-4 py-3 rounded-lg text-gray-800">
                            <i class="fas fa-search absolute right-4 top-3 text-gray-500"></i>
                        </div>
                    </div>
                    <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" class="absolute right-0 top-0 h-full object-cover opacity-20" alt="Food">
                </div>

                <!-- Categories -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Catégories</h3>
                    <div class="flex space-x-6 overflow-x-auto pb-2">
                        <button v-for="category in categories" :key="category.id" 
                                @click="filterByCategory(category.id)"
                                :class="{'category-active': selectedCategory === category.id}"
                                class="px-4 py-2 whitespace-nowrap text-gray-600 hover:text-orange-500 transition">
                            {{ category.name }}
                        </button>
                    </div>
                </div>

                <!-- Featured Products -->
                <div>
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800">Nos plats populaires</h3>
                        <button @click="showCreateMenuModal = true" class="text-orange-500 hover:text-orange-600 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Créer un menu
                        </button>
                    </div>

                    <div v-if="loadingProducts" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div v-for="i in 4" :key="i" class="bg-white rounded-xl shadow p-4 animate-pulse">
                            <div class="bg-gray-200 h-40 rounded-lg mb-3"></div>
                            <div class="h-4 bg-gray-200 rounded mb-2"></div>
                            <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                        </div>
                    </div>

                    <div v-else class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div v-for="product in filteredProducts" :key="product.id" 
                             class="bg-white rounded-xl shadow p-4 product-card transition duration-300">
                            <img :src="product.image" :alt="product.name" class="w-full h-40 object-cover rounded-lg mb-3">
                            <h4 class="font-semibold text-gray-800">{{ product.name }}</h4>
                            <p class="text-sm text-gray-500 mb-2">{{ product.description }}</p>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-orange-500">{{ product.price }} €</span>
                                <button @click="addToCart(product)" class="px-3 py-1 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Detail -->
            <div v-if="currentView === 'product-detail'" class="max-w-4xl mx-auto">
                <button @click="currentView = 'home'" class="mb-4 flex items-center text-orange-500 hover:text-orange-600">
                    <i class="fas fa-arrow-left mr-2"></i> Retour
                </button>
                
                <div class="bg-white rounded-xl shadow overflow-hidden">
                    <div class="md:flex">
                        <div class="md:w-1/2">
                            <img :src="currentProduct.image" :alt="currentProduct.name" class="w-full h-64 md:h-full object-cover">
                        </div>
                        <div class="p-6 md:w-1/2">
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">{{ currentProduct.name }}</h2>
                            <div class="flex items-center mb-4">
                                <div class="flex">
                                    <i v-for="i in 5" :key="i" 
                                       :class="{'text-gray-300': i > currentProduct.rating, 'rating-star': i <= currentProduct.rating}" 
                                       class="fas fa-star"></i>
                                </div>
                                <span class="text-sm text-gray-500 ml-2">({{ currentProduct.reviews }} avis)</span>
                            </div>
                            <p class="text-gray-600 mb-4">{{ currentProduct.description }}</p>
                            <div class="mb-6">
                                <h3 class="font-semibold text-gray-800 mb-2">Ingrédients :</h3>
                                <ul class="list-disc list-inside text-gray-600">
                                    <li v-for="ingredient in currentProduct.ingredients" :key="ingredient">{{ ingredient }}</li>
                                </ul>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-orange-500">{{ currentProduct.price }} €</span>
                                <div class="flex items-center space-x-2">
                                    <button @click="decreaseQuantity" class="px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <span class="px-3">{{ productQuantity }}</span>
                                    <button @click="increaseQuantity" class="px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                    <button @click="addToCart(currentProduct, productQuantity)" class="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                        Ajouter au panier
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 bg-white rounded-xl shadow p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Avis clients</h3>
                    <div v-if="currentProduct.reviewsData.length === 0" class="text-center text-gray-500 py-4">
                        Aucun avis pour ce produit.
                    </div>
                    <div v-else>
                        <div v-for="review in currentProduct.reviewsData" :key="review.id" class="border-b border-gray-100 py-4 last:border-0">
                            <div class="flex items-center mb-2">
                                <img :src="review.userAvatar" class="w-8 h-8 rounded-full mr-3" alt="User">
                                <div>
                                    <h4 class="font-medium">{{ review.userName }}</h4>
                                    <div class="flex">
                                        <i v-for="i in 5" :key="i" 
                                           :class="{'text-gray-300': i > review.rating, 'rating-star': i <= review.rating}" 
                                           class="fas fa-star text-sm"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600">{{ review.comment }}</p>
                            <p class="text-xs text-gray-400 mt-2">{{ formatDate(review.date) }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order Process -->
            <div v-if="currentView === 'order'" class="max-w-4xl mx-auto">
                <div class="mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Passer commande</h2>
                        <div class="flex items-center text-sm text-gray-500">
                            <span>Étape {{ currentStep }} sur 4</span>
                        </div>
                    </div>
                    
                    <div class="flex mb-8">
                        <div @click="setStep(1)" :class="{'order-step-active': currentStep >= 1}" class="flex-1 text-center py-2 border-t-2 border-orange-500 cursor-pointer">
                            <span class="block font-medium">1. Adresse</span>
                        </div>
                        <div @click="setStep(2)" :class="{'order-step-active': currentStep >= 2}" class="flex-1 text-center py-2 border-t-2 border-gray-200 cursor-pointer">
                            <span class="block font-medium">2. Livraison</span>
                        </div>
                        <div @click="setStep(3)" :class="{'order-step-active': currentStep >= 3}" class="flex-1 text-center py-2 border-t-2 border-gray-200 cursor-pointer">
                            <span class="block font-medium">3. Paiement</span>
                        </div>
                        <div @click="setStep(4)" :class="{'order-step-active': currentStep >= 4}" class="flex-1 text-center py-2 border-t-2 border-gray-200 cursor-pointer">
                            <span class="block font-medium">4. Confirmation</span>
                        </div>
                    </div>
                    
                    <!-- Step 1: Address -->
                    <div v-if="currentStep === 1" class="bg-white rounded-xl shadow p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Adresse de livraison</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-gray-700 mb-2">Prénom</label>
                                <input v-model="orderInfo.firstName" type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Nom</label>
                                <input v-model="orderInfo.lastName" type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Adresse</label>
                            <input v-model="orderInfo.address" type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <label class="block text-gray-700 mb-2">Code postal</label>
                                <input v-model="orderInfo.zipCode" type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Ville</label>
                                <input v-model="orderInfo.city" type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Pays</label>
                                <input v-model="orderInfo.country" type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Téléphone</label>
                            <input v-model="orderInfo.phone" type="tel" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Email</label>
                            <input v-model="orderInfo.email" type="email" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                        </div>
                        
                        <div class="flex justify-end">
                            <button @click="nextStep" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                Continuer
                            </button>
                        </div>
                    </div>
                    
                    <!-- Step 2: Delivery -->
                    <div v-if="currentStep === 2" class="bg-white rounded-xl shadow p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Options de livraison</h3>
                        
                        <div class="space-y-4 mb-6">
                            <div v-for="option in deliveryOptions" :key="option.id" 
                                 @click="selectDeliveryOption(option)"
                                 :class="{'border-orange-500 bg-orange-50': selectedDeliveryOption === option.id}"
                                 class="border-2 rounded-lg p-4 cursor-pointer transition">
                                <div class="flex items-center">
                                    <div class="mr-4">
                                        <div :class="{'bg-orange-500': selectedDeliveryOption === option.id, 'bg-gray-300': selectedDeliveryOption !== option.id}" 
                                             class="w-5 h-5 rounded-full flex items-center justify-center">
                                            <i v-if="selectedDeliveryOption === option.id" class="fas fa-check text-white text-xs"></i>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-medium">{{ option.name }}</h4>
                                        <p class="text-sm text-gray-600">{{ option.description }}</p>
                                    </div>
                                    <div class="text-orange-500 font-medium">
                                        +{{ option.price }} €
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button @click="prevStep" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                                Retour
                            </button>
                            <button @click="nextStep" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                Continuer
                            </button>
                        </div>
                    </div>
                    
                    <!-- Step 3: Payment -->
                    <div v-if="currentStep === 3" class="bg-white rounded-xl shadow p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Moyen de paiement</h3>
                        
                        <div class="space-y-4 mb-6">
                            <div v-for="method in paymentMethods" :key="method.id" 
                                 @click="selectPaymentMethod(method)"
                                 :class="{'border-orange-500 bg-orange-50': selectedPaymentMethod === method.id}"
                                 class="border-2 rounded-lg p-4 cursor-pointer transition">
                                <div class="flex items-center">
                                    <div class="mr-4">
                                        <div :class="{'bg-orange-500': selectedPaymentMethod === method.id, 'bg-gray-300': selectedPaymentMethod !== method.id}" 
                                             class="w-5 h-5 rounded-full flex items-center justify-center">
                                            <i v-if="selectedPaymentMethod === method.id" class="fas fa-check text-white text-xs"></i>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-medium">{{ method.name }}</h4>
                                        <p class="text-sm text-gray-600">{{ method.description }}</p>
                                    </div>
                                    <div>
                                        <i :class="method.icon" class="text-2xl text-gray-500"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div v-if="selectedPaymentMethod === 'credit-card'" class="mb-6 border-t pt-6">
                            <h4 class="font-medium text-gray-800 mb-4">Informations de carte</h4>
                            
                            <div class="mb-4">
                                <label class="block text-gray-700 mb-2">Numéro de carte</label>
                                <input v-model="paymentInfo.cardNumber" type="text" placeholder="1234 5678 9012 3456" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-gray-700 mb-2">Date d'expiration</label>
                                    <input v-model="paymentInfo.expiryDate" type="text" placeholder="MM/AA" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">CVV</label>
                                    <input v-model="paymentInfo.cvv" type="text" placeholder="123" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="block text-gray-700 mb-2">Nom sur la carte</label>
                                <input v-model="paymentInfo.cardName" type="text" placeholder="Nom complet" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500">
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button @click="prevStep" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                                Retour
                            </button>
                            <button @click="processPayment" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                Payer maintenant
                            </button>
                        </div>
                    </div>
                    
                    <!-- Step 4: Confirmation -->
                    <div v-if="currentStep === 4" class="bg-white rounded-xl shadow p-6">
                        <div class="text-center mb-8">
                            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-check text-green-500 text-3xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Commande confirmée !</h3>
                            <p class="text-gray-600">Merci pour votre commande #{{ orderNumber }}</p>
                        </div>
                        
                        <div class="border-t pt-6 mb-6">
                            <h4 class="font-medium text-gray-800 mb-4">Récapitulatif de la commande</h4>
                            
                            <div class="mb-4">
                                <h5 class="text-gray-700 mb-2">Adresse de livraison</h5>
                                <p class="text-gray-600">{{ orderInfo.firstName }} {{ orderInfo.lastName }}</p>
                                <p class="text-gray-600">{{ orderInfo.address }}</p>
                                <p class="text-gray-600">{{ orderInfo.zipCode }} {{ orderInfo.city }}, {{ orderInfo.country }}</p>
                                <p class="text-gray-600">{{ orderInfo.phone }}</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="text-gray-700 mb-2">Livraison</h5>
                                <p class="text-gray-600">{{ selectedDeliveryOptionName }}</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="text-gray-700 mb-2">Paiement</h5>
                                <p class="text-gray-600">{{ selectedPaymentMethodName }}</p>
                                <p v-if="selectedPaymentMethod === 'credit-card'" class="text-gray-600">Carte se terminant par {{ paymentInfo.cardNumber.slice(-4) }}</p>
                            </div>
                            
                            <div>
                                <h5 class="text-gray-700 mb-2">Articles commandés</h5>
                                <div v-for="item in cart.items" :key="item.id" class="flex justify-between py-2 border-b border-gray-100 last:border-0">
                                    <div>
                                        <p class="text-gray-800">{{ item.quantity }} × {{ item.name }}</p>
                                        <p v-if="item.customization" class="text-sm text-gray-500">{{ item.customization }}</p>
                                    </div>
                                    <p class="text-gray-800">{{ (item.price * item.quantity).toFixed(2) }} €</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border-t pt-4">
                            <div class="flex justify-between py-2">
                                <span class="text-gray-700">Sous-total</span>
                                <span class="text-gray-800">{{ cartTotal.toFixed(2) }} €</span>
                            </div>
                            <div class="flex justify-between py-2">
                                <span class="text-gray-700">Livraison</span>
                                <span class="text-gray-800">{{ deliveryPrice.toFixed(2) }} €</span>
                            </div>
                            <div class="flex justify-between py-2 font-bold text-lg">
                                <span class="text-gray-800">Total</span>
                                <span class="text-orange-500">{{ (cartTotal + deliveryPrice).toFixed(2) }} €</span>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <p class="text-gray-600 text-center mb-4">Un email de confirmation vous a été envoyé à {{ orderInfo.email }}</p>
                            <div class="flex justify-center">
                                <button @click="completeOrder" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                    Retour à l'accueil
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order History -->
            <div v-if="currentView === 'order-history'" class="max-w-4xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Historique des commandes</h2>
                    <button @click="currentView = 'home'" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                        Retour
                    </button>
                </div>
                
                <div v-if="loadingOrders" class="space-y-4">
                    <div v-for="i in 3" :key="i" class="bg-white rounded-xl shadow p-6 animate-pulse">
                        <div class="h-4 bg-gray-200 rounded w-1/4 mb-4"></div>
                        <div class="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
                        <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                    </div>
                </div>
                
                <div v-else-if="orders.length === 0" class="bg-white rounded-xl shadow p-8 text-center">
                    <i class="fas fa-clipboard-list text-4xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-medium text-gray-700 mb-2">Aucune commande passée</h3>
                    <p class="text-gray-500 mb-4">Vous n'avez pas encore passé de commande avec Zerda.</p>
                    <button @click="currentView = 'home'" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                        Voir les menus
                    </button>
                </div>
                
                <div v-else class="space-y-4">
                    <div v-for="order in orders" :key="order.id" class="bg-white rounded-xl shadow overflow-hidden">
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-bold text-gray-800">Commande #{{ order.id }}</h3>
                                    <p class="text-sm text-gray-500">{{ formatDate(order.date) }}</p>
                                </div>
                                <span :class="getStatusClass(order.status)" class="px-3 py-1 rounded-full text-sm font-medium">
                                    {{ order.status }}
                                </span>
                            </div>
                            
                            <div class="mb-4">
                                <div v-for="item in order.items" :key="item.id" class="flex justify-between py-2 border-b border-gray-100 last:border-0">
                                    <div>
                                        <p class="text-gray-800">{{ item.quantity }} × {{ item.name }}</p>
                                        <p v-if="item.customization" class="text-sm text-gray-500">{{ item.customization }}</p>
                                    </div>
                                    <p class="text-gray-800">{{ (item.price * item.quantity).toFixed(2) }} €</p>
                                </div>
                            </div>
                            
                            <div class="border-t pt-4">
                                <div class="flex justify-between py-1">
                                    <span class="text-gray-700">Sous-total</span>
                                    <span class="text-gray-800">{{ order.subtotal.toFixed(2) }} €</span>
                                </div>
                                <div class="flex justify-between py-1">
                                    <span class="text-gray-700">Livraison</span>
                                    <span class="text-gray-800">{{ order.deliveryPrice.toFixed(2) }} €</span>
                                </div>
                                <div class="flex justify-between py-1 font-medium">
                                    <span class="text-gray-800">Total</span>
                                    <span class="text-orange-500">{{ order.total.toFixed(2) }} €</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 px-6 py-3 flex justify-between items-center">
                            <div>
                                <p class="text-sm text-gray-600">Livraison à {{ order.deliveryAddress }}</p>
                            </div>
                            <div class="flex space-x-2">
                                <button @click="viewOrderDetails(order)" class="px-3 py-1 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition">
                                    Détails
                                </button>
                                <button v-if="order.status === 'Livrée'" @click="showReviewModal(order)" class="px-3 py-1 text-sm bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                    Noter
                                </button>
                                <button v-if="order.status === 'En préparation'" @click="cancelOrder(order)" class="px-3 py-1 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition">
                                    Annuler
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order Tracking -->
            <div v-if="currentView === 'order-tracking'" class="max-w-4xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Suivi de commande #{{ trackingOrder.id }}</h2>
                    <button @click="currentView = 'home'" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                        Retour
                    </button>
                </div>
                
                <div class="bg-white rounded-xl shadow overflow-hidden mb-6">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-bold text-gray-800">Commande #{{ trackingOrder.id }}</h3>
                                <p class="text-sm text-gray-500">{{ formatDate(trackingOrder.date) }}</p>
                            </div>
                            <span :class="getStatusClass(trackingOrder.status)" class="px-3 py-1 rounded-full text-sm font-medium">
                                {{ trackingOrder.status }}
                            </span>
                        </div>
                        
                        <div class="mb-6">
                            <div class="relative">
                                <div class="absolute left-4 top-0 h-full w-0.5 bg-gray-200"></div>
                                
                                <div v-for="(step, index) in orderSteps" :key="index" class="relative pl-10 pb-6 last:pb-0">
                                    <div :class="{'bg-orange-500': step.active, 'bg-gray-300': !step.active}" 
                                         class="absolute left-4 top-0 w-3 h-3 rounded-full -ml-1.5 mt-1.5"></div>
                                    <div class="flex justify-between">
                                        <div>
                                            <h4 class="font-medium text-gray-800">{{ step.name }}</h4>
                                            <p v-if="step.date" class="text-sm text-gray-500">{{ formatDate(step.date) }}</p>
                                        </div>
                                        <div v-if="step.active" class="text-orange-500">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-medium text-gray-800 mb-3">Détails de la commande</h4>
                                <div v-for="item in trackingOrder.items" :key="item.id" class="flex justify-between py-2 border-b border-gray-100 last:border-0">
                                    <div>
                                        <p class="text-gray-800">{{ item.quantity }} × {{ item.name }}</p>
                                        <p v-if="item.customization" class="text-sm text-gray-500">{{ item.customization }}</p>
                                    </div>
                                    <p class="text-gray-800">{{ (item.price * item.quantity).toFixed(2) }} €</p>
                                </div>
                                
                                <div class="border-t pt-4 mt-4">
                                    <div class="flex justify-between py-1">
                                        <span class="text-gray-700">Sous-total</span>
                                        <span class="text-gray-800">{{ trackingOrder.subtotal.toFixed(2) }} €</span>
                                    </div>
                                    <div class="flex justify-between py-1">
                                        <span class="text-gray-700">Livraison</span>
                                        <span class="text-gray-800">{{ trackingOrder.deliveryPrice.toFixed(2) }} €</span>
                                    </div>
                                    <div class="flex justify-between py-1 font-medium">
                                        <span class="text-gray-800">Total</span>
                                        <span class="text-orange-500">{{ trackingOrder.total.toFixed(2) }} €</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="font-medium text-gray-800 mb-3">Livraison</h4>
                                <div class="bg-gray-50 rounded-lg p-4 mb-4">
                                    <div class="flex items-start mb-3">
                                        <div class="bg-orange-100 p-2 rounded-full mr-3">
                                            <i class="fas fa-map-marker-alt text-orange-500"></i>
                                        </div>
                                        <div>
                                            <h5 class="font-medium text-gray-800">Adresse de livraison</h5>
                                            <p class="text-gray-600">{{ trackingOrder.deliveryAddress }}</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-start">
                                        <div class="bg-orange-100 p-2 rounded-full mr-3">
                                            <i class="fas fa-user text-orange-500"></i>
                                        </div>
                                        <div>
                                            <h5 class="font-medium text-gray-800">Livreur</h5>
                                            <p v-if="trackingOrder.deliveryPerson" class="text-gray-600">
                                                {{ trackingOrder.deliveryPerson }} 
                                                <span v-if="trackingOrder.deliveryPhone" class="text-orange-500">• {{ trackingOrder.deliveryPhone }}</span>
                                            </p>
                                            <p v-else class="text-gray-600">En attente d'un livreur</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div v-if="trackingOrder.deliveryPerson" class="bg-orange-50 rounded-lg p-4">
                                    <div class="flex items-center mb-2">
                                        <i class="fas fa-clock text-orange-500 mr-2"></i>
                                        <span class="font-medium text-gray-800">Temps estimé</span>
                                    </div>
                                    <p class="text-gray-600">Votre commande devrait arriver dans environ 15-20 minutes.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 px-6 py-4 flex justify-end">
                        <button @click="currentView = 'order-history'" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                            Retour à l'historique
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Shopping Cart Sidebar -->
        <transition name="fade">
            <div v-if="showCart" class="fixed inset-0 z-50 overflow-hidden">
                <div class="absolute inset-0 bg-black bg-opacity-50" @click="toggleCart"></div>
                <div class="absolute inset-y-0 right-0 max-w-full flex">
                    <div class="relative w-screen max-w-md">
                        <div class="h-full flex flex-col bg-white shadow-xl">
                            <div class="flex-1 overflow-y-auto">
                                <div class="px-4 py-6 bg-orange-500 text-white">
                                    <div class="flex items-center justify-between">
                                        <h2 class="text-xl font-bold">Votre panier</h2>
                                        <button @click="toggleCart" class="text-white hover:text-orange-200">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                    <p v-if="cart.items.length > 0" class="text-sm mt-1">{{ cart.items.reduce((total, item) => total + item.quantity, 0) }} article(s)</p>
                                </div>
                                
                                <div v-if="cart.items.length === 0" class="text-center py-12">
                                    <i class="fas fa-shopping-cart text-4xl text-gray-300 mb-4"></i>
                                    <h3 class="text-lg font-medium text-gray-700 mb-2">Votre panier est vide</h3>
                                    <p class="text-gray-500 mb-6">Ajoutez des articles pour commencer votre commande.</p>
                                    <button @click="toggleCart" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                        Voir les menus
                                    </button>
                                </div>
                                
                                <div v-else class="divide-y divide-gray-200">
                                    <div v-for="item in cart.items" :key="item.id" class="p-4 cart-item">
                                        <div class="flex justify-between">
                                            <div class="flex">
                                                <img :src="item.image" class="w-16 h-16 object-cover rounded-lg mr-3" alt="Product">
                                                <div>
                                                    <h3 class="font-medium text-gray-800">{{ item.name }}</h3>
                                                    <p v-if="item.customization" class="text-xs text-gray-500">{{ item.customization }}</p>
                                                    <p class="text-orange-500 font-medium">{{ item.price }} €</p>
                                                </div>
                                            </div>
                                            <div class="flex flex-col items-end">
                                                <div class="flex items-center space-x-2 mb-2">
                                                    <button @click.stop="decreaseCartItemQuantity(item)" class="w-6 h-6 flex items-center justify-center bg-gray-200 rounded-full hover:bg-gray-300">
                                                        <i class="fas fa-minus text-xs"></i>
                                                    </button>
                                                    <span class="w-6 text-center">{{ item.quantity }}</span>
                                                    <button @click.stop="increaseCartItemQuantity(item)" class="w-6 h-6 flex items-center justify-center bg-gray-200 rounded-full hover:bg-gray-300">
                                                        <i class="fas fa-plus text-xs"></i>
                                                    </button>
                                                </div>
                                                <button @click.stop="removeFromCart(item)" class="text-xs text-gray-500 hover:text-red-500">
                                                    <i class="fas fa-trash mr-1"></i> Supprimer
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div v-if="cart.items.length > 0" class="border-t border-gray-200 p-4">
                                <div class="flex justify-between py-2">
                                    <span class="text-gray-700">Sous-total</span>
                                    <span class="text-gray-800">{{ cartTotal.toFixed(2) }} €</span>
                                </div>
                                <div class="flex justify-between py-2">
                                    <span class="text-gray-700">Livraison</span>
                                    <span class="text-gray-800">{{ deliveryPrice.toFixed(2) }} €</span>
                                </div>
                                <div class="flex justify-between py-2 font-bold text-lg">
                                    <span class="text-gray-800">Total</span>
                                    <span class="text-orange-500">{{ (cartTotal + deliveryPrice).toFixed(2) }} €</span>
                                </div>
                                <button @click="startCheckout" class="w-full mt-4 px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                    Passer commande
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </transition>

        <!-- Login Modal -->
        <div v-if="showLoginModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
            <div class="bg-white rounded-xl shadow-lg max-w-md w-full mx-4">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-800">Connexion</h3>
                        <button @click="showLoginModal = false" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form @submit.prevent="login">
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Email</label>
                            <input v-model="loginForm.email" type="email" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2">Mot de passe</label>
                            <input v-model="loginForm.password" type="password" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                        </div>
                        
                        <button type="submit" class="w-full px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition mb-4">
                            Se connecter
                        </button>
                        
                        <div class="text-center">
                            <p class="text-gray-600">Pas encore de compte ? <a href="#" @click="showRegisterModal = true; showLoginModal = false" class="text-orange-500 hover:underline">S'inscrire</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Register Modal -->
        <div v-if="showRegisterModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
            <div class="bg-white rounded-xl shadow-lg max-w-md w-full mx-4">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-800">Créer un compte</h3>
                        <button @click="showRegisterModal = false" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form @submit.prevent="register">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-gray-700 mb-2">Prénom</label>
                                <input v-model="registerForm.firstName" type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Nom</label>
                                <input v-model="registerForm.lastName" type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Email</label>
                            <input v-model="registerForm.email" type="email" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Téléphone</label>
                            <input v-model="registerForm.phone" type="tel" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2">Mot de passe</label>
                            <input v-model="registerForm.password" type="password" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                        </div>
                        
                        <button type="submit" class="w-full px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition mb-4">
                            S'inscrire
                        </button>
                        
                        <div class="text-center">
                            <p class="text-gray-600">Déjà un compte ? <a href="#" @click="showLoginModal = true; showRegisterModal = false" class="text-orange-500 hover:underline">Se connecter</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Create Menu Modal -->
        <div v-if="showCreateMenuModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
            <div class="bg-white rounded-xl shadow-lg max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-800">Créer votre menu</h3>
                        <button @click="showCreateMenuModal = false" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="mb-6">
                        <div class="flex space-x-4 overflow-x-auto pb-2">
                            <button v-for="step in menuSteps" :key="step.id" 
                                    @click="currentMenuStep = step.id"
                                    :class="{'bg-orange-500 text-white': currentMenuStep === step.id, 'bg-gray-100 text-gray-700': currentMenuStep !== step.id}"
                                    class="px-4 py-2 rounded-lg whitespace-nowrap">
                                {{ step.name }}
                            </button>
                        </div>
                    </div>
                    
                    <!-- Sandwich Selection -->
                    <div v-if="currentMenuStep === 1">
                        <h4 class="font-medium text-gray-800 mb-4">Choisissez votre sandwich</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div v-for="product in sandwichProducts" :key="product.id" 
                                 @click="selectMenuProduct('sandwich', product)"
                                 :class="{'border-orange-500 bg-orange-50': customMenu.sandwich && customMenu.sandwich.id === product.id}"
                                 class="border-2 rounded-lg p-4 cursor-pointer transition">
                                <div class="flex">
                                    <img :src="product.image" class="w-16 h-16 object-cover rounded-lg mr-3" alt="Product">
                                    <div>
                                        <h5 class="font-medium">{{ product.name }}</h5>
                                        <p class="text-sm text-gray-600">{{ product.description }}</p>
                                        <p class="text-orange-500 font-medium">{{ product.price }} €</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button @click="showCreateMenuModal = false" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                                Annuler
                            </button>
                            <button @click="currentMenuStep = 2" :disabled="!customMenu.sandwich" 
                                    :class="{'bg-orange-500 hover:bg-orange-600': customMenu.sandwich, 'bg-gray-300 cursor-not-allowed': !customMenu.sandwich}"
                                    class="px-6 py-2 text-white rounded-lg transition">
                                Suivant
                            </button>
                        </div>
                    </div>
                    
                    <!-- Side Selection -->
                    <div v-if="currentMenuStep === 2">
                        <h4 class="font-medium text-gray-800 mb-4">Choisissez votre accompagnement</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div v-for="product in sideProducts" :key="product.id" 
                                 @click="selectMenuProduct('side', product)"
                                 :class="{'border-orange-500 bg-orange-50': customMenu.side && customMenu.side.id === product.id}"
                                 class="border-2 rounded-lg p-4 cursor-pointer transition">
                                <div class="flex">
                                    <img :src="product.image" class="w-16 h-16 object-cover rounded-lg mr-3" alt="Product">
                                    <div>
                                        <h5 class="font-medium">{{ product.name }}</h5>
                                        <p class="text-sm text-gray-600">{{ product.description }}</p>
                                        <p class="text-orange-500 font-medium">{{ product.price }} €</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button @click="currentMenuStep = 1" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                                Retour
                            </button>
                            <button @click="currentMenuStep = 3" :disabled="!customMenu.side" 
                                    :class="{'bg-orange-500 hover:bg-orange-600': customMenu.side, 'bg-gray-300 cursor-not-allowed': !customMenu.side}"
                                    class="px-6 py-2 text-white rounded-lg transition">
                                Suivant
                            </button>
                        </div>
                    </div>
                    
                    <!-- Drink Selection -->
                    <div v-if="currentMenuStep === 3">
                        <h4 class="font-medium text-gray-800 mb-4">Choisissez votre boisson</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div v-for="product in drinkProducts" :key="product.id" 
                                 @click="selectMenuProduct('drink', product)"
                                 :class="{'border-orange-500 bg-orange-50': customMenu.drink && customMenu.drink.id === product.id}"
                                 class="border-2 rounded-lg p-4 cursor-pointer transition">
                                <div class="flex">
                                    <img :src="product.image" class="w-16 h-16 object-cover rounded-lg mr-3" alt="Product">
                                    <div>
                                        <h5 class="font-medium">{{ product.name }}</h5>
                                        <p class="text-sm text-gray-600">{{ product.description }}</p>
                                        <p class="text-orange-500 font-medium">{{ product.price }} €</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button @click="currentMenuStep = 2" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                                Retour
                            </button>
                            <button @click="currentMenuStep = 4" :disabled="!customMenu.drink" 
                                    :class="{'bg-orange-500 hover:bg-orange-600': customMenu.drink, 'bg-gray-300 cursor-not-allowed': !customMenu.drink}"
                                    class="px-6 py-2 text-white rounded-lg transition">
                                Suivant
                            </button>
                        </div>
                    </div>
                    
                    <!-- Dessert Selection -->
                    <div v-if="currentMenuStep === 4">
                        <h4 class="font-medium text-gray-800 mb-4">Choisissez votre dessert</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div v-for="product in dessertProducts" :key="product.id" 
                                 @click="selectMenuProduct('dessert', product)"
                                 :class="{'border-orange-500 bg-orange-50': customMenu.dessert && customMenu.dessert.id === product.id}"
                                 class="border-2 rounded-lg p-4 cursor-pointer transition">
                                <div class="flex">
                                    <img :src="product.image" class="w-16 h-16 object-cover rounded-lg mr-3" alt="Product">
                                    <div>
                                        <h5 class="font-medium">{{ product.name }}</h5>
                                        <p class="text-sm text-gray-600">{{ product.description }}</p>
                                        <p class="text-orange-500 font-medium">{{ product.price }} €</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button @click="currentMenuStep = 3" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                                Retour
                            </button>
                            <button @click="currentMenuStep = 5" :disabled="!customMenu.dessert" 
                                    :class="{'bg-orange-500 hover:bg-orange-600': customMenu.dessert, 'bg-gray-300 cursor-not-allowed': !customMenu.dessert}"
                                    class="px-6 py-2 text-white rounded-lg transition">
                                Suivant
                            </button>
                        </div>
                    </div>
                    
                    <!-- Menu Summary -->
                    <div v-if="currentMenuStep === 5">
                        <h4 class="font-medium text-gray-800 mb-4">Récapitulatif de votre menu</h4>
                        
                        <div class="bg-gray-50 rounded-lg p-4 mb-6">
                            <div class="mb-4">
                                <h5 class="text-gray-700 mb-2">Sandwich</h5>
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="text-gray-800">{{ customMenu.sandwich.name }}</p>
                                        <p class="text-sm text-gray-500">{{ customMenu.sandwich.description }}</p>
                                    </div>
                                    <p class="text-orange-500 font-medium">{{ customMenu.sandwich.price }} €</p>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="text-gray-700 mb-2">Accompagnement</h5>
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="text-gray-800">{{ customMenu.side.name }}</p>
                                        <p class="text-sm text-gray-500">{{ customMenu.side.description }}</p>
                                    </div>
                                    <p class="text-orange-500 font-medium">{{ customMenu.side.price }} €</p>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="text-gray-700 mb-2">Boisson</h5>
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="text-gray-800">{{ customMenu.drink.name }}</p>
                                        <p class="text-sm text-gray-500">{{ customMenu.drink.description }}</p>
                                    </div>
                                    <p class="text-orange-500 font-medium">{{ customMenu.drink.price }} €</p>
                                </div>
                            </div>
                            
                            <div>
                                <h5 class="text-gray-700 mb-2">Dessert</h5>
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="text-gray-800">{{ customMenu.dessert.name }}</p>
                                        <p class="text-sm text-gray-500">{{ customMenu.dessert.description }}</p>
                                    </div>
                                    <p class="text-orange-500 font-medium">{{ customMenu.dessert.price }} €</p>
                                </div>
                            </div>
                            
                            <div class="border-t pt-4 mt-4">
                                <div class="flex justify-between font-medium">
                                    <span class="text-gray-800">Prix total</span>
                                    <span class="text-orange-500">{{ calculateMenuPrice() }} €</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button @click="currentMenuStep = 4" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                                Retour
                            </button>
                            <button @click="addMenuToCart" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                                Ajouter au panier
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Review Modal -->
        <div v-if="showReviewModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
            <div class="bg-white rounded-xl shadow-lg max-w-md w-full mx-4">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-800">Noter votre commande #{{ reviewOrder.id }}</h3>
                        <button @click="showReviewModal = false" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="mb-6">
                        <div class="flex justify-center mb-4">
                            <div class="flex">
                                <i v-for="i in 5" :key="i" 
                                   @click="reviewRating = i"
                                   :class="{'text-gray-300': i > reviewRating, 'rating-star text-3xl': i <= reviewRating}"
                                   class="fas fa-star mx-1 cursor-pointer"></i>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Commentaire</label>
                            <textarea v-model="reviewComment" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" rows="3" placeholder="Dites-nous ce que vous avez pensé de votre commande..."></textarea>
                        </div>
                    </div>
                    
                    <div class="flex justify-end">
                        <button @click="showReviewModal = false" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition mr-2">
                            Annuler
                        </button>
                        <button @click="submitReview" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition">
                            Envoyer
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <transition name="fade">
            <div v-if="showToast" :class="toastClass" class="fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg flex items-center z-50">
                <i :class="toastIcon" class="mr-3"></i>
                <span>{{ toastMessage }}</span>
            </div>
        </transition>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                // App state
                const currentView = ref('home');
                const showCart = ref(false);
                const showLoginModal = ref(false);
                const showRegisterModal = ref(false);
                const showCreateMenuModal = ref(false);
                const showReviewModal = ref(false);
                const showToast = ref(false);
                const toastMessage = ref('');
                const toastType = ref('success');
                const loadingProducts = ref(false);
                const loadingOrders = ref(false);
                
                // User data
                const user = ref(null);
                const loginForm = ref({
                    email: '',
                    password: ''
                });
                const registerForm = ref({
                    firstName: '',
                    lastName: '',
                    email: '',
                    phone: '',
                    password: ''
                });
                
                // Product data
                const products = ref([]);
                const filteredProducts = ref([]);
                const categories = ref([
                    { id: 1, name: 'Tous' },
                    { id: 2, name: 'Sandwichs' },
                    { id: 3, name: 'Salades' },
                    { id: 4, name: 'Frites' },
                    { id: 5, name: 'Boissons' },
                    { id: 6, name: 'Desserts' }
                ]);
                const selectedCategory = ref(1);
                const searchQuery = ref('');
                const currentProduct = ref(null);
                const productQuantity = ref(1);
                
                // Cart data
                const cart = ref({
                    items: []
                });
                
                // Order process
                const currentStep = ref(1);
                const orderInfo = ref({
                    firstName: '',
                    lastName: '',
                    address: '',
                    zipCode: '',
                    city: '',
                    country: 'France',
                    phone: '',
                    email: ''
                });
                const deliveryOptions = ref([
                    { id: 'standard', name: 'Livraison standard', description: 'Livraison en 30-45 minutes', price: 2.50 },
                    { id: 'express', name: 'Livraison express', description: 'Livraison en 15-30 minutes', price: 4.50 },
                    { id: 'scheduled', name: 'Livraison programmée', description: 'Choisissez votre créneau', price: 1.50 }
                ]);
                const selectedDeliveryOption = ref('standard');
                const paymentMethods = ref([
                    { id: 'credit-card', name: 'Carte bancaire', description: 'Paiement sécurisé par carte', icon: 'far fa-credit-card' },
                    { id: 'paypal', name: 'PayPal', description: 'Payer avec votre compte PayPal', icon: 'fab fa-paypal' },
                    { id: 'apple-pay', name: 'Apple Pay', description: 'Paiement avec Apple Pay', icon: 'fab fa-apple' },
                    { id: 'google-pay', name: 'Google Pay', description: 'Paiement avec Google Pay', icon: 'fab fa-google' }
                ]);
                const selectedPaymentMethod = ref('credit-card');
                const paymentInfo = ref({
                    cardNumber: '',
                    expiryDate: '',
                    cvv: '',
                    cardName: ''
                });
                const orderNumber = ref('');
                
                // Order history
                const orders = ref([]);
                const trackingOrder = ref(null);
                
                // Review
                const reviewOrder = ref(null);
                const reviewRating = ref(0);
                const reviewComment = ref('');
                
                // Custom menu
                const currentMenuStep = ref(1);
                const menuSteps = ref([
                    { id: 1, name: 'Sandwich' },
                    { id: 2, name: 'Accompagnement' },
                    { id: 3, name: 'Boisson' },
                    { id: 4, name: 'Dessert' },
                    { id: 5, name: 'Récapitulatif' }
                ]);
                const customMenu = ref({
                    sandwich: null,
                    side: null,
                    drink: null,
                    dessert: null
                });
                
                // Computed properties
                const cartTotal = computed(() => {
                    return cart.value.items.reduce((total, item) => total + (item.price * item.quantity), 0);
                });
                
                const deliveryPrice = computed(() => {
                    const option = deliveryOptions.value.find(opt => opt.id === selectedDeliveryOption.value);
                    return option ? option.price : 0;
                });
                
                const selectedDeliveryOptionName = computed(() => {
                    const option = deliveryOptions.value.find(opt => opt.id === selectedDeliveryOption.value);
                    return option ? option.name : '';
                });
                
                const selectedPaymentMethodName = computed(() => {
                    const method = paymentMethods.value.find(m => m.id === selectedPaymentMethod.value);
                    return method ? method.name : '';
                });
                
                const sandwichProducts = computed(() => {
                    return products.value.filter(p => p.category === 'Sandwichs');
                });
                
                const sideProducts = computed(() => {
                    return products.value.filter(p => p.category === 'Frites' || p.category === 'Salades');
                });
                
                const drinkProducts = computed(() => {
                    return products.value.filter(p => p.category === 'Boissons');
                });
                
                const dessertProducts = computed(() => {
                    return products.value.filter(p => p.category === 'Desserts');
                });
                
                const toastClass = computed(() => {
                    return {
                        'bg-green-100 text-green-800': toastType.value === 'success',
                        'bg-red-100 text-red-800': toastType.value === 'error',
                        'bg-blue-100 text-blue-800': toastType.value === 'info'
                    };
                });
                
                const toastIcon = computed(() => {
                    return {
                        'fas fa-check-circle text-green-500': toastType.value === 'success',
                        'fas fa-exclamation-circle text-red-500': toastType.value === 'error',
                        'fas fa-info-circle text-blue-500': toastType.value === 'info'
                    };
                });
                
                const orderSteps = computed(() => {
                    if (!trackingOrder.value) return [];
                    
                    const steps = [
                        { id: 1, name: 'Commande passée', active: true, date: trackingOrder.value.date },
                        { id: 2, name: 'En préparation', active: trackingOrder.value.status === 'En préparation' || trackingOrder.value.status === 'En livraison' || trackingOrder.value.status === 'Livrée', date: trackingOrder.value.preparationDate },
                        { id: 3, name: 'En livraison', active: trackingOrder.value.status === 'En livraison' || trackingOrder.value.status === 'Livrée', date: trackingOrder.value.deliveryDate },
                        { id: 4, name: 'Livrée', active: trackingOrder.value.status === 'Livrée', date: trackingOrder.value.deliveredDate }
                    ];
                    
                    return steps;
                });
                
                // Methods
                const showNotification = (message, type = 'success') => {
                    toastMessage.value = message;
                    toastType.value = type;
                    showToast.value = true;
                    
                    setTimeout(() => {
                        showToast.value = false;
                    }, 3000);
                };
                
                const toggleCart = () => {
                    showCart.value = !showCart.value;
                };
                
                const filterByCategory = (categoryId) => {
                    selectedCategory.value = categoryId;
                    
                    if (categoryId === 1) {
                        filteredProducts.value = products.value;
                    } else {
                        const categoryName = categories.value.find(c => c.id === categoryId).name;
                        filteredProducts.value = products.value.filter(p => p.category === categoryName);
                    }
                };
                
                const searchProducts = () => {
                    if (searchQuery.value.trim() === '') {
                        filterByCategory
</html>