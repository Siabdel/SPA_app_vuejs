<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuxeSalon - Mobilier Haut de Gamme</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        .product-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .nav-pills .nav-link.active {
            background-color: #6c757d;
        }
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1050;
        }
        .spinner-border {
            width: 3rem;
            height: 3rem;
        }
        .filter-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .product-image {
            height: 200px;
            object-fit: cover;
        }
        .product-detail-image {
            height: 400px;
            object-fit: cover;
        }
        .swatch {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .swatch.active {
            border-color: #000;
        }
        .cart-item-image {
            width: 80px;
            height: 60px;
            object-fit: cover;
        }
        @media (max-width: 768px) {
            .product-detail-image {
                height: 250px;
            }
            .product-image {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Toast Notifications -->
        <div class="toast-container">
            <div v-for="(toast, index) in toasts" :key="index" class="toast show align-items-center" :class="`text-bg-${toast.type}`" role="alert">
                <div class="d-flex">
                    <div class="toast-body">
                        <i :class="toast.icon" class="me-2"></i>
                        {{ toast.message }}
                    </div>
                    <button type="button" class="btn-close me-2 m-auto" @click="removeToast(index)"></button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div v-if="loading" class="loading-overlay">
            <div class="spinner-border text-secondary" role="status">
                <span class="visually-hidden">Chargement...</span>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <div class="container">
                <a class="navbar-brand" href="#" @click.prevent="currentView = 'home'">
                    <i class="bi bi-house-heart me-2"></i>LuxeSalon
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item" v-for="category in categories" :key="category.id">
                            <a class="nav-link" href="#" @click.prevent="filterByCategory(category.id)">{{ category.name }}</a>
                        </li>
                    </ul>
                    <div class="d-flex">
                        <div class="input-group me-3">
                            <input type="text" class="form-control" placeholder="Rechercher..." v-model="searchQuery" @keyup.enter="searchProducts">
                            <button class="btn btn-outline-light" @click="searchProducts">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                        <button class="btn btn-outline-light position-relative" @click="currentView = 'cart'">
                            <i class="bi bi-cart3"></i>
                            <span v-if="cart.length > 0" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                                {{ cart.reduce((total, item) => total + item.quantity, 0) }}
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="container my-4">
            <!-- Home View - Product Listing -->
            <div v-if="currentView === 'home'">
                <div class="row">
                    <!-- Filters Sidebar -->
                    <div class="col-md-3">
                        <div class="filter-section">
                            <h5 class="mb-3">Filtrer</h5>
                            
                            <div class="mb-3">
                                <label class="form-label">Catégories</label>
                                <div class="list-group">
                                    <a href="#" class="list-group-item list-group-item-action" 
                                       :class="{ 'active': activeFilters.category === null }"
                                       @click.prevent="clearCategoryFilter">
                                        Toutes les catégories
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" 
                                       v-for="category in categories" :key="category.id"
                                       :class="{ 'active': activeFilters.category === category.id }"
                                       @click.prevent="filterByCategory(category.id)">
                                        {{ category.name }}
                                    </a>
                                </div>
                            </div>
                            
                            <div class="mb-3" v-if="availableMaterials.length > 0">
                                <label class="form-label">Matières</label>
                                <select class="form-select" v-model="activeFilters.material" @change="applyFilters">
                                    <option value="">Toutes les matières</option>
                                    <option v-for="material in availableMaterials" :value="material">{{ material }}</option>
                                </select>
                            </div>
                            
                            <div class="mb-3" v-if="availableColors.length > 0">
                                <label class="form-label">Couleurs</label>
                                <select class="form-select" v-model="activeFilters.color" @change="applyFilters">
                                    <option value="">Toutes les couleurs</option>
                                    <option v-for="color in availableColors" :value="color">{{ color }}</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Prix</label>
                                <div class="d-flex justify-content-between">
                                    <span>{{ minPrice }} €</span>
                                    <span>{{ maxPrice }} €</span>
                                </div>
                                <input type="range" class="form-range" min="0" max="5000" step="50" 
                                       v-model="activeFilters.maxPrice" @change="applyFilters">
                            </div>
                            
                            <button class="btn btn-outline-secondary w-100" @click="resetFilters">
                                <i class="bi bi-x-circle me-1"></i> Réinitialiser
                            </button>
                        </div>
                    </div>
                    
                    <!-- Product Grid -->
                    <div class="col-md-9">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2 v-if="activeFilters.category">
                                {{ categories.find(c => c.id === activeFilters.category)?.name }}
                            </h2>
                            <h2 v-else>Nos produits</h2>
                            <div class="d-flex align-items-center">
                                <span class="me-2">Trier par:</span>
                                <select class="form-select form-select-sm" style="width: auto;" v-model="sortOption" @change="sortProducts">
                                    <option value="price-asc">Prix croissant</option>
                                    <option value="price-desc">Prix décroissant</option>
                                    <option value="name-asc">Nom (A-Z)</option>
                                    <option value="name-desc">Nom (Z-A)</option>
                                    <option value="newest">Nouveautés</option>
                                </select>
                            </div>
                        </div>
                        
                        <div v-if="filteredProducts.length === 0" class="text-center py-5">
                            <i class="bi bi-search" style="font-size: 3rem;"></i>
                            <h4 class="mt-3">Aucun produit ne correspond à vos critères</h4>
                            <button class="btn btn-outline-secondary mt-3" @click="resetFilters">
                                Réinitialiser les filtres
                            </button>
                        </div>
                        
                        <div v-else class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                            <div class="col" v-for="product in paginatedProducts" :key="product.id">
                                <div class="card product-card h-100">
                                    <img :src="product.images[0]" class="card-img-top product-image" :alt="product.name">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ product.name }}</h5>
                                        <p class="card-text text-muted">{{ product.short_description }}</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="h5 text-primary">{{ product.price }} €</span>
                                            <button class="btn btn-sm btn-outline-primary" @click="viewProductDetail(product)">
                                                <i class="bi bi-eye"></i> Voir
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pagination -->
                        <nav v-if="filteredProducts.length > itemsPerPage" class="mt-4">
                            <ul class="pagination justify-content-center">
                                <li class="page-item" :class="{ 'disabled': currentPage === 1 }">
                                    <button class="page-link" @click="changePage(currentPage - 1)">
                                        <i class="bi bi-chevron-left"></i>
                                    </button>
                                </li>
                                <li class="page-item" v-for="page in totalPages" :key="page" 
                                    :class="{ 'active': page === currentPage }">
                                    <button class="page-link" @click="changePage(page)">{{ page }}</button>
                                </li>
                                <li class="page-item" :class="{ 'disabled': currentPage === totalPages }">
                                    <button class="page-link" @click="changePage(currentPage + 1)">
                                        <i class="bi bi-chevron-right"></i>
                                    </button>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            
            <!-- Product Detail View -->
            <div v-else-if="currentView === 'product-detail'">
                <button class="btn btn-outline-secondary mb-3" @click="currentView = 'home'">
                    <i class="bi bi-arrow-left"></i> Retour aux produits
                </button>
                
                <div v-if="selectedProduct" class="row">
                    <div class="col-md-6">
                        <img :src="selectedProduct.images[0]" class="img-fluid rounded product-detail-image mb-3" :alt="selectedProduct.name">
                        <div class="row g-2">
                            <div class="col-4" v-for="(image, index) in selectedProduct.images.slice(1)" :key="index">
                                <img :src="image" class="img-fluid rounded" style="height: 100px; width: 100%; object-fit: cover; cursor: pointer;" 
                                     @click="selectedProduct.images = [image, ...selectedProduct.images.filter(img => img !== image)]">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h2>{{ selectedProduct.name }}</h2>
                        <div class="d-flex align-items-center mb-3">
                            <span class="h4 text-primary me-3">{{ selectedProduct.price }} €</span>
                            <span class="badge bg-success" v-if="selectedProduct.stock > 0">
                                <i class="bi bi-check-circle"></i> En stock
                            </span>
                            <span class="badge bg-danger" v-else>
                                <i class="bi bi-x-circle"></i> Rupture
                            </span>
                        </div>
                        
                        <div class="mb-4">
                            <p>{{ selectedProduct.long_description }}</p>
                        </div>
                        
                        <div class="mb-4" v-if="selectedProduct.dimensions">
                            <h5>Dimensions</h5>
                            <ul>
                                <li>Longueur: {{ selectedProduct.dimensions.length }} cm</li>
                                <li>Largeur: {{ selectedProduct.dimensions.width }} cm</li>
                                <li>Hauteur: {{ selectedProduct.dimensions.height }} cm</li>
                                <li v-if="selectedProduct.dimensions.weight">Poids: {{ selectedProduct.dimensions.weight }} kg</li>
                            </ul>
                        </div>
                        
                        <div class="mb-4" v-if="selectedProduct.variants && selectedProduct.variants.length > 0">
                            <h5>Options disponibles</h5>
                            
                            <div v-for="variant in selectedProduct.variants" :key="variant.type" class="mb-3">
                                <label class="form-label">{{ variant.type }}:</label>
                                <div>
                                    <span v-for="option in variant.options" :key="option.value" 
                                          class="swatch me-2 mb-2" 
                                          :class="{ 'active': selectedVariantOptions[variant.type] === option.value }"
                                          :style="{ 'background-color': variant.type === 'Couleur' ? option.value : '#f8f9fa', 
                                                    'color': variant.type !== 'Couleur' ? '#212529' : 'transparent' }"
                                          @click="selectVariantOption(variant.type, option.value)">
                                        <span v-if="variant.type !== 'Couleur'">{{ option.value }}</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex align-items-center mb-4">
                            <div class="me-3">
                                <label class="form-label">Quantité:</label>
                                <div class="input-group" style="width: 120px;">
                                    <button class="btn btn-outline-secondary" @click="decreaseQuantity">
                                        <i class="bi bi-dash"></i>
                                    </button>
                                    <input type="number" class="form-control text-center" v-model="quantity" min="1" :max="selectedProduct.stock">
                                    <button class="btn btn-outline-secondary" @click="increaseQuantity">
                                        <i class="bi bi-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary flex-grow-1" @click="addToCart" :disabled="selectedProduct.stock === 0">
                                <i class="bi bi-cart-plus"></i> Ajouter au panier
                            </button>
                        </div>
                        
                        <div class="card">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">Livraison et retours</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li class="mb-2"><i class="bi bi-truck text-primary me-2"></i> Livraison en 3-5 jours ouvrés</li>
                                    <li class="mb-2"><i class="bi bi-arrow-repeat text-primary me-2"></i> Retours gratuits sous 30 jours</li>
                                    <li><i class="bi bi-shield-check text-primary me-2"></i> Garantie 2 ans</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Cart View -->
            <div v-else-if="currentView === 'cart'">
                <button class="btn btn-outline-secondary mb-3" @click="currentView = 'home'">
                    <i class="bi bi-arrow-left"></i> Continuer mes achats
                </button>
                
                <h2 class="mb-4">Mon panier</h2>
                
                <div v-if="cart.length === 0" class="text-center py-5">
                    <i class="bi bi-cart-x" style="font-size: 3rem;"></i>
                    <h4 class="mt-3">Votre panier est vide</h4>
                    <button class="btn btn-primary mt-3" @click="currentView = 'home'">
                        <i class="bi bi-bag me-1"></i> Découvrir nos produits
                    </button>
                </div>
                
                <div v-else class="row">
                    <div class="col-lg-8">
                        <div class="card mb-4">
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table mb-0">
                                        <thead class="bg-light">
                                            <tr>
                                                <th style="width: 45%">Produit</th>
                                                <th style="width: 20%">Prix</th>
                                                <th style="width: 20%">Quantité</th>
                                                <th style="width: 15%">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(item, index) in cart" :key="index">
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img :src="item.image" class="cart-item-image me-3 rounded" :alt="item.name">
                                                        <div>
                                                            <h6 class="mb-0">{{ item.name }}</h6>
                                                            <small class="text-muted" v-if="item.variant">Option: {{ item.variant }}</small>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>{{ item.price }} €</td>
                                                <td>
                                                    <div class="input-group" style="width: 100px;">
                                                        <button class="btn btn-outline-secondary btn-sm" @click="updateCartItemQuantity(index, item.quantity - 1)">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        <input type="number" class="form-control form-control-sm text-center" 
                                                               v-model.number="item.quantity" @change="updateCartItemQuantity(index, item.quantity)" min="1">
                                                        <button class="btn btn-outline-secondary btn-sm" @click="updateCartItemQuantity(index, item.quantity + 1)">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                                <td>{{ (item.price * item.quantity).toFixed(2) }} €</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-danger" @click="removeFromCart(index)">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Code promo</h5>
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Entrez votre code" v-model="promoCode">
                                    <button class="btn btn-secondary" @click="applyPromoCode">
                                        Appliquer
                                    </button>
                                </div>
                                <p v-if="discountApplied" class="text-success mt-2 mb-0">
                                    <i class="bi bi-check-circle"></i> Réduction de {{ discountAmount }}% appliquée
                                </p>
                                <p v-else-if="promoError" class="text-danger mt-2 mb-0">
                                    <i class="bi bi-exclamation-circle"></i> {{ promoError }}
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Récapitulatif</h5>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                                        Sous-total
                                        <span>{{ subtotal.toFixed(2) }} €</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                                        Livraison
                                        <span v-if="subtotal >= 500">Gratuite</span>
                                        <span v-else>29.90 €</span>
                                    </li>
                                    <li v-if="discountApplied" class="list-group-item d-flex justify-content-between align-items-center px-0 text-success">
                                        Réduction
                                        <span>-{{ (subtotal * discountAmount / 100).toFixed(2) }} €</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                                        <div>
                                            <strong>Total</strong>
                                        </div>
                                        <span><strong>{{ total.toFixed(2) }} €</strong></span>
                                    </li>
                                </ul>
                                
                                <button class="btn btn-primary w-100" @click="currentView = 'checkout'">
                                    <i class="bi bi-credit-card me-1"></i> Passer la commande
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Checkout View -->
            <div v-else-if="currentView === 'checkout'">
                <button class="btn btn-outline-secondary mb-3" @click="currentView = 'cart'">
                    <i class="bi bi-arrow-left"></i> Retour au panier
                </button>
                
                <h2 class="mb-4">Finaliser ma commande</h2>
                
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Informations de livraison</h5>
                                
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="firstName" class="form-label">Prénom</label>
                                        <input type="text" class="form-control" id="firstName" v-model="checkoutForm.firstName" 
                                               :class="{ 'is-invalid': checkoutErrors.firstName }">
                                        <div class="invalid-feedback" v-if="checkoutErrors.firstName">
                                            {{ checkoutErrors.firstName }}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="lastName" class="form-label">Nom</label>
                                        <input type="text" class="form-control" id="lastName" v-model="checkoutForm.lastName" 
                                               :class="{ 'is-invalid': checkoutErrors.lastName }">
                                        <div class="invalid-feedback" v-if="checkoutErrors.lastName">
                                            {{ checkoutErrors.lastName }}
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label for="email" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="email" v-model="checkoutForm.email" 
                                               :class="{ 'is-invalid': checkoutErrors.email }">
                                        <div class="invalid-feedback" v-if="checkoutErrors.email">
                                            {{ checkoutErrors.email }}
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label for="address" class="form-label">Adresse</label>
                                        <input type="text" class="form-control" id="address" v-model="checkoutForm.address" 
                                               :class="{ 'is-invalid': checkoutErrors.address }">
                                        <div class="invalid-feedback" v-if="checkoutErrors.address">
                                            {{ checkoutErrors.address }}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="city" class="form-label">Ville</label>
                                        <input type="text" class="form-control" id="city" v-model="checkoutForm.city" 
                                               :class="{ 'is-invalid': checkoutErrors.city }">
                                        <div class="invalid-feedback" v-if="checkoutErrors.city">
                                            {{ checkoutErrors.city }}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="state" class="form-label">Région</label>
                                        <select class="form-select" id="state" v-model="checkoutForm.state" 
                                                :class="{ 'is-invalid': checkoutErrors.state }">
                                            <option value="">Choisir...</option>
                                            <option v-for="region in regions" :value="region">{{ region }}</option>
                                        </select>
                                        <div class="invalid-feedback" v-if="checkoutErrors.state">
                                            {{ checkoutErrors.state }}
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <label for="zip" class="form-label">Code postal</label>
                                        <input type="text" class="form-control" id="zip" v-model="checkoutForm.zip" 
                                               :class="{ 'is-invalid': checkoutErrors.zip }">
                                        <div class="invalid-feedback" v-if="checkoutErrors.zip">
                                            {{ checkoutErrors.zip }}
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label for="phone" class="form-label">Téléphone</label>
                                        <input type="tel" class="form-control" id="phone" v-model="checkoutForm.phone" 
                                               :class="{ 'is-invalid': checkoutErrors.phone }">
                                        <div class="invalid-feedback" v-if="checkoutErrors.phone">
                                            {{ checkoutErrors.phone }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Méthode de livraison</h5>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="delivery" id="standard" 
                                           value="standard" v-model="checkoutForm.deliveryMethod">
                                    <label class="form-check-label" for="standard">
                                        Livraison standard (3-5 jours ouvrés) - 
                                        <span v-if="subtotal >= 500">Gratuite</span>
                                        <span v-else>29.90 €</span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="delivery" id="express" 
                                           value="express" v-model="checkoutForm.deliveryMethod">
                                    <label class="form-check-label" for="express">
                                        Livraison express (1-2 jours ouvrés) - 49.90 €
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Méthode de paiement</h5>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="payment" id="credit" 
                                           value="credit" v-model="checkoutForm.paymentMethod">
                                    <label class="form-check-label" for="credit">
                                        <i class="bi bi-credit-card me-1"></i> Carte de crédit
                                    </label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="payment" id="paypal" 
                                           value="paypal" v-model="checkoutForm.paymentMethod">
                                    <label class="form-check-label" for="paypal">
                                        <i class="bi bi-paypal me-1"></i> PayPal
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="payment" id="bank" 
                                           value="bank" v-model="checkoutForm.paymentMethod">
                                    <label class="form-check-label" for="bank">
                                        <i class="bi bi-bank me-1"></i> Virement bancaire
                                    </label>
                                </div>
                                
                                <div v-if="checkoutForm.paymentMethod === 'credit'" class="mt-4">
                                    <div class="row g-3">
                                        <div class="col-12">
                                            <label for="cardNumber" class="form-label">Numéro de carte</label>
                                            <input type="text" class="form-control" id="cardNumber" 
                                                   v-model="checkoutForm.cardNumber" placeholder="1234 5678 9012 3456">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="cardExpiry" class="form-label">Date d'expiration</label>
                                            <input type="text" class="form-control" id="cardExpiry" 
                                                   v-model="checkoutForm.cardExpiry" placeholder="MM/AA">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="cardCvc" class="form-label">Code de sécurité</label>
                                            <input type="text" class="form-control" id="cardCvc" 
                                                   v-model="checkoutForm.cardCvc" placeholder="CVC">
                                        </div>
                                        <div class="col-12">
                                            <label for="cardName" class="form-label">Nom sur la carte</label>
                                            <input type="text" class="form-control" id="cardName" 
                                                   v-model="checkoutForm.cardName">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title mb-3">Votre commande</h5>
                                
                                <div class="d-flex justify-content-between mb-2" v-for="item in cart" :key="item.id">
                                    <div>
                                        {{ item.quantity }} × {{ item.name }}
                                        <small v-if="item.variant" class="d-block text-muted">{{ item.variant }}</small>
                                    </div>
                                    <div>{{ (item.price * item.quantity).toFixed(2) }} €</div>
                                </div>
                                
                                <hr>
                                
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Sous-total</span>
                                    <span>{{ subtotal.toFixed(2) }} €</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Livraison</span>
                                    <span>
                                        <span v-if="subtotal >= 500">Gratuite</span>
                                        <span v-else-if="checkoutForm.deliveryMethod === 'standard'">29.90 €</span>
                                        <span v-else-if="checkoutForm.deliveryMethod === 'express'">49.90 €</span>
                                    </span>
                                </div>
                                <div v-if="discountApplied" class="d-flex justify-content-between mb-2 text-success">
                                    <span>Réduction</span>
                                    <span>-{{ (subtotal * discountAmount / 100).toFixed(2) }} €</span>
                                </div>
                                
                                <hr>
                                
                                <div class="d-flex justify-content-between fw-bold">
                                    <span>Total</span>
                                    <span>{{ total.toFixed(2) }} €</span>
                                </div>
                                
                                <div class="form-check mt-4 mb-3">
                                    <input class="form-check-input" type="checkbox" id="terms" v-model="checkoutForm.acceptTerms">
                                    <label class="form-check-label" for="terms">
                                        J'accepte les <a href="#">conditions générales</a> et la <a href="#">politique de confidentialité</a>
                                    </label>
                                </div>
                                
                                <button class="btn btn-primary w-100" @click="placeOrder" :disabled="processingOrder">
                                    <span v-if="!processingOrder">
                                        <i class="bi bi-check-circle me-1"></i> Confirmer la commande
                                    </span>
                                    <span v-else>
                                        <span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
                                        Traitement...
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Order Confirmation View -->
            <div v-else-if="currentView === 'confirmation'">
                <div class="text-center py-5">
                    <div class="mb-4">
                        <i class="bi bi-check-circle-fill text-success" style="font-size: 5rem;"></i>
                    </div>
                    <h2 class="mb-3">Merci pour votre commande !</h2>
                    <p class="lead mb-4">Votre commande #{{ orderConfirmation.orderId }} a bien été enregistrée.</p>
                    <p class="mb-4">Un email de confirmation vous a été envoyé à <strong>{{ orderConfirmation.email }}</strong>.</p>
                    
                    <div class="card mx-auto mb-4" style="max-width: 500px;">
                        <div class="card-body">
                            <h5 class="card-title mb-3">Récapitulatif</h5>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Date</span>
                                <span>{{ orderConfirmation.date }}</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Total</span>
                                <span>{{ orderConfirmation.total.toFixed(2) }} €</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Méthode de paiement</span>
                                <span>{{ orderConfirmation.paymentMethod }}</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Livraison prévue</span>
                                <span>{{ orderConfirmation.deliveryDate }}</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" @click="currentView = 'home'">
                        <i class="bi bi-house-door me-1"></i> Retour à l'accueil
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="bg-dark text-white py-5 mt-5">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 mb-4 mb-md-0">
                        <h5 class="mb-3">LuxeSalon</h5>
                        <p>Votre destination premium pour le mobilier de salon haut de gamme.</p>
                        <div class="social-icons">
                            <a href="#" class="text-white me-3"><i class="bi bi-facebook"></i></a>
                            <a href="#" class="text-white me-3"><i class="bi bi-instagram"></i></a>
                            <a href="#" class="text-white me-3"><i class="bi bi-pinterest"></i></a>
                            <a href="#" class="text-white"><i class="bi bi-twitter"></i></a>
                        </div>
                    </div>
                    <div class="col-md-2 mb-4 mb-md-0">
                        <h5 class="mb-3">Navigation</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="text-white" @click.prevent="currentView = 'home'">Accueil</a></li>
                            <li class="mb-2"><a href="#" class="text-white">Nos produits</a></li>
                            <li class="mb-2"><a href="#" class="text-white">Inspirations</a></li>
                            <li class="mb-2"><a href="#" class="text-white">À propos</a></li>
                            <li><a href="#" class="text-white">Contact</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3 mb-4 mb-md-0">
                        <h5 class="mb-3">Service client</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="text-white">Livraison & retours</a></li>
                            <li class="mb-2"><a href="#" class="text-white">FAQ</a></li>
                            <li class="mb-2"><a href="#" class="text-white">Guide des tailles</a></li>
                            <li class="mb-2"><a href="#" class="text-white">Mentions légales</a></li>
                            <li><a href="#" class="text-white">CGV</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h5 class="mb-3">Contact</h5>
                        <address>
                            <p><i class="bi bi-geo-alt me-2"></i> 123 Rue du Luxe, 75001 Paris</p>
                            <p><i class="bi bi-telephone me-2"></i> +33 1 23 45 67 89</p>
                            <p><i class="bi bi-envelope me-2"></i> contact@luxesalon.com</p>
                        </address>
                    </div>
                </div>
                <hr class="my-4 bg-secondary">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="mb-0">&copy; 2023 LuxeSalon. Tous droits réservés.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <img src="https://via.placeholder.com/40" alt="Payment methods" class="img-fluid" style="height: 30px;">
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, watch } = Vue;
        
        createApp({
            setup() {
                // State
                const currentView = ref('home');
                const loading = ref(false);
                const toasts = ref([]);
                const products = ref([]);
                const categories = ref([]);
                const cart = ref([]);
                const selectedProduct = ref(null);
                const selectedVariantOptions = ref({});
                const quantity = ref(1);
                const searchQuery = ref('');
                const activeFilters = ref({
                    category: null,
                    material: '',
                    color: '',
                    maxPrice: 5000
                });
                const sortOption = ref('price-asc');
                const currentPage = ref(1);
                const itemsPerPage = ref(9);
                const promoCode = ref('');
                const discountApplied = ref(false);
                const discountAmount = ref(0);
                const promoError = ref('');
                const checkoutForm = ref({
                    firstName: '',
                    lastName: '',
                    email: '',
                    address: '',
                    city: '',
                    state: '',
                    zip: '',
                    phone: '',
                    deliveryMethod: 'standard',
                    paymentMethod: 'credit',
                    cardNumber: '',
                    cardExpiry: '',
                    cardCvc: '',
                    cardName: '',
                    acceptTerms: false
                });
                const checkoutErrors = ref({});
                const processingOrder = ref(false);
                const orderConfirmation = ref({});
                const regions = ref([
                    'Auvergne-Rhône-Alpes', 'Bourgogne-Franche-Comté', 'Bretagne', 'Centre-Val de Loire', 
                    'Corse', 'Grand Est', 'Hauts-de-France', 'Île-de-France', 'Normandie', 
                    'Nouvelle-Aquitaine', 'Occitanie', 'Pays de la Loire', 'Provence-Alpes-Côte d\'Azur'
                ]);

                // Computed
                const filteredProducts = computed(() => {
                    let filtered = products.value;
                    
                    // Apply category filter
                    if (activeFilters.value.category) {
                        filtered = filtered.filter(product => 
                            product.category_id === activeFilters.value.category
                        );
                    }
                    
                    // Apply material filter
                    if (activeFilters.value.material) {
                        filtered = filtered.filter(product => 
                            product.materials.includes(activeFilters.value.material)
                        );
                    }
                    
                    // Apply color filter
                    if (activeFilters.value.color) {
                        filtered = filtered.filter(product => 
                            product.colors.includes(activeFilters.value.color)
                        );
                    }
                    
                    // Apply price filter
                    filtered = filtered.filter(product => 
                        product.price <= activeFilters.value.maxPrice
                    );
                    
                    // Apply search query
                    if (searchQuery.value) {
                        const query = searchQuery.value.toLowerCase();
                        filtered = filtered.filter(product => 
                            product.name.toLowerCase().includes(query) || 
                            product.description.toLowerCase().includes(query)
                        );
                    }
                    
                    return filtered;
                });
                
                const sortedProducts = computed(() => {
                    const products = [...filteredProducts.value];
                    
                    switch (sortOption.value) {
                        case 'price-asc':
                            return products.sort((a, b) => a.price - b.price);
                        case 'price-desc':
                            return products.sort((a, b) => b.price - a.price);
                        case 'name-asc':
                            return products.sort((a, b) => a.name.localeCompare(b.name));
                        case 'name-desc':
                            return products.sort((a, b) => b.name.localeCompare(a.name));
                        case 'newest':
                            return products.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
                        default:
                            return products;
                    }
                });
                
                const paginatedProducts = computed(() => {
                    const start = (currentPage.value - 1) * itemsPerPage.value;
                    const end = start + itemsPerPage.value;
                    return sortedProducts.value.slice(start, end);
                });
                
                const totalPages = computed(() => {
                    return Math.ceil(filteredProducts.value.length / itemsPerPage.value);
                });
                
                const availableMaterials = computed(() => {
                    const materials = new Set();
                    products.value.forEach(product => {
                        product.materials.forEach(material => materials.add(material));
                    });
                    return Array.from(materials).sort();
                });
                
                const availableColors = computed(() => {
                    const colors = new Set();
                    products.value.forEach(product => {
                        product.colors.forEach(color => colors.add(color));
                    });
                    return Array.from(colors).sort();
                });
                
                const minPrice = computed(() => {
                    return 0;
                });
                
                const maxPrice = computed(() => {
                    return activeFilters.value.maxPrice;
                });
                
                const subtotal = computed(() => {
                    return cart.value.reduce((total, item) => {
                        return total + (item.price * item.quantity);
                    }, 0);
                });
                
                const shippingCost = computed(() => {
                    if (subtotal.value >= 500) return 0;
                    return checkoutForm.value.deliveryMethod === 'standard' ? 29.90 : 49.90;
                });
                
                const total = computed(() => {
                    let total = subtotal.value + shippingCost.value;
                    if (discountApplied.value) {
                        total -= subtotal.value * discountAmount.value / 100;
                    }
                    return total;
                });

                // Methods
                const showToast = (message, type = 'success') => {
                    const icons = {
                        success: 'bi-check-circle',
                        error: 'bi-exclamation-circle',
                        info: 'bi-info-circle',
                        warning: 'bi-exclamation-triangle'
                    };
                    
                    toasts.value.push({
                        message,
                        type,
                        icon: icons[type] || 'bi-info-circle'
                    });
                    
                    setTimeout(() => {
                        toasts.value.shift();
                    }, 5000);
                };
                
                const removeToast = (index) => {
                    toasts.value.splice(index, 1);
                };
                
                const fetchProducts = async () => {
                    loading.value = true;
                    try {
                        // In a real app, this would be an API call
                        // const response = await axios.get('/api/products');
                        // products.value = response.data;
                        
                        // Mock data for demo
                        products.value = [
                            {
                                id: 1,
                                name: 'Canapé Chesterfield en cuir',
                                category_id: 1,
                                price: 2499,
                                short_description: 'Canapé luxueux en cuir pleine fleur',
                                long_description: 'Ce canapé Chesterfield est fabriqué à la main avec du cuir pleine fleur de première qualité. Son design intemporel et son confort exceptionnel en font un meuble d\'exception pour votre salon.',
                                stock: 5,
                                images: [
                                    'https://images.unsplash.com/photo-1555041469-586a694194ca?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1634620738271-3a8f101c7f6a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1634620738306-3a8f101c7f6a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Cuir', 'Bois de chêne'],
                                colors: ['Marron', 'Noir'],
                                variants: [
                                    {
                                        type: 'Couleur',
                                        options: [
                                            { value: 'Marron', price: 0 },
                                            { value: 'Noir', price: 200 }
                                        ]
                                    }
                                ],
                                dimensions: {
                                    length: 220,
                                    width: 95,
                                    height: 85,
                                    weight: 120
                                },
                                created_at: '2023-01-15'
                            },
                            {
                                id: 2,
                                name: 'Banquette sur mesure en velours',
                                category_id: 2,
                                price: 1899,
                                short_description: 'Banquette élégante en velours haut de gamme',
                                long_description: 'Cette banquette sur mesure est recouverte de velours italien de qualité supérieure. Disponible en plusieurs coloris, elle s\'adaptera parfaitement à votre intérieur.',
                                stock: 8,
                                images: [
                                    'https://images.unsplash.com/photo-1600210492493-0946911123ea?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1600210491892-03d54c0aaf87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Velours', 'Bois massif'],
                                colors: ['Bleu', 'Vert', 'Rose'],
                                variants: [
                                    {
                                        type: 'Couleur',
                                        options: [
                                            { value: 'Bleu', price: 0 },
                                            { value: 'Vert', price: 0 },
                                            { value: 'Rose', price: 150 }
                                        ]
                                    },
                                    {
                                        type: 'Longueur',
                                        options: [
                                            { value: '160 cm', price: 0 },
                                            { value: '200 cm', price: 300 },
                                            { value: '240 cm', price: 500 }
                                        ]
                                    }
                                ],
                                dimensions: {
                                    length: 200,
                                    width: 90,
                                    height: 75,
                                    weight: 80
                                },
                                created_at: '2023-03-10'
                            },
                            {
                                id: 3,
                                name: 'Lit à baldaquin en bois massif',
                                category_id: 3,
                                price: 3299,
                                short_description: 'Lit royal en chêne massif sculpté à la main',
                                long_description: 'Ce lit à baldaquin est une pièce maîtresse pour votre chambre. Fabriqué en chêne massif et sculpté à la main par nos artisans, il apportera une touche royale à votre espace nuit.',
                                stock: 3,
                                images: [
                                    'https://images.unsplash.com/photo-1616627561839-074385245ff6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1616627561839-074385245ff6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Bois de chêne', 'Tissu'],
                                colors: ['Blanc', 'Naturel'],
                                variants: [
                                    {
                                        type: 'Tissu',
                                        options: [
                                            { value: 'Lin', price: 0 },
                                            { value: 'Soie', price: 450 },
                                            { value: 'Velours', price: 300 }
                                        ]
                                    }
                                ],
                                dimensions: {
                                    length: 220,
                                    width: 180,
                                    height: 250,
                                    weight: 150
                                },
                                created_at: '2022-11-20'
                            },
                            {
                                id: 4,
                                name: 'Fauteuil club en cuir patiné',
                                category_id: 1,
                                price: 1299,
                                short_description: 'Fauteuil club élégant en cuir vieilli',
                                long_description: 'Ce fauteuil club en cuir patiné apportera une touche d\'élégance à votre intérieur. Son cuir vieilli naturellement lui donne un caractère unique.',
                                stock: 7,
                                images: [
                                    'https://images.unsplash.com/photo-1592078615290-033ee584e267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1592078615290-033ee584e267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Cuir', 'Acier'],
                                colors: ['Marron', 'Cognac'],
                                dimensions: {
                                    length: 90,
                                    width: 85,
                                    height: 75,
                                    weight: 25
                                },
                                created_at: '2023-02-05'
                            },
                            {
                                id: 5,
                                name: 'Table basse en marbre',
                                category_id: 4,
                                price: 899,
                                short_description: 'Table basse design avec plateau en marbre',
                                long_description: 'Cette table basse allie le métal chromé et le marbre de Carrare pour un rendu luxueux. Son plateau en marbre massif est unique grâce à ses veines naturelles.',
                                stock: 4,
                                images: [
                                    'https://images.unsplash.com/photo-1600210491892-03d54c0aaf87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1600210491892-03d54c0aaf87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Marbre', 'Métal'],
                                colors: ['Blanc', 'Noir'],
                                variants: [
                                    {
                                        type: 'Marbre',
                                        options: [
                                            { value: 'Blanc', price: 0 },
                                            { value: 'Noir', price: 200 }
                                        ]
                                    }
                                ],
                                dimensions: {
                                    length: 120,
                                    width: 60,
                                    height: 45,
                                    weight: 35
                                },
                                created_at: '2023-04-15'
                            },
                            {
                                id: 6,
                                name: 'Ensemble salon en rotin',
                                category_id: 1,
                                price: 4299,
                                short_description: 'Ensemble complet canapé + 2 fauteuils + table',
                                long_description: 'Cet ensemble salon en rotin synthétique de haute qualité résiste aux intempéries tout en offrant un confort optimal. Parfait pour votre terrasse ou véranda.',
                                stock: 2,
                                images: [
                                    'https://images.unsplash.com/photo-1581539250439-c96689b516dd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1581539250439-c96689b516dd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Rotin', 'Tissu'],
                                colors: ['Beige', 'Gris'],
                                dimensions: {
                                    length: 180,
                                    width: 150,
                                    height: 80,
                                    weight: 65
                                },
                                created_at: '2023-01-30'
                            },
                            {
                                id: 7,
                                name: 'Chaise design en plastique recyclé',
                                category_id: 5,
                                price: 199,
                                short_description: 'Chaise empilable design et écologique',
                                long_description: 'Cette chaise design est fabriquée en plastique recyclé. Son design ergonomique et ses couleurs vives en font un élément moderne pour votre intérieur ou extérieur.',
                                stock: 15,
                                images: [
                                    'https://images.unsplash.com/photo-1592078615290-033ee584e267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1592078615290-033ee584e267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Plastique recyclé'],
                                colors: ['Rouge', 'Jaune', 'Bleu', 'Vert'],
                                dimensions: {
                                    length: 50,
                                    width: 50,
                                    height: 80,
                                    weight: 4
                                },
                                created_at: '2023-05-10'
                            },
                            {
                                id: 8,
                                name: 'Bibliothèque modulaire',
                                category_id: 6,
                                price: 1599,
                                short_description: 'Bibliothèque contemporaine en modules',
                                long_description: 'Cette bibliothèque modulaire vous permet de créer la composition parfaite pour votre espace. Fabriquée en bois de hêtre massif avec finition laquée.',
                                stock: 6,
                                images: [
                                    'https://images.unsplash.com/photo-1555041469-586a694194ca?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1555041469-586a694194ca?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Bois de hêtre'],
                                colors: ['Blanc', 'Noir', 'Naturel'],
                                variants: [
                                    {
                                        type: 'Finition',
                                        options: [
                                            { value: 'Blanc', price: 0 },
                                            { value: 'Noir', price: 150 },
                                            { value: 'Naturel', price: 200 }
                                        ]
                                    }
                                ],
                                dimensions: {
                                    length: 180,
                                    width: 40,
                                    height: 220,
                                    weight: 90
                                },
                                created_at: '2022-12-15'
                            },
                            {
                                id: 9,
                                name: 'Tapis en laine artisanale',
                                category_id: 7,
                                price: 599,
                                short_description: 'Tapis tissé main en laine naturelle',
                                long_description: 'Ce tapis est tissé à la main par des artisans utilisant des techniques traditionnelles. La laine naturelle offre une douceur et une durabilité exceptionnelles.',
                                stock: 10,
                                images: [
                                    'https://images.unsplash.com/photo-1600210491892-03d54c0aaf87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                                    'https://images.unsplash.com/photo-1600210491892-03d54c0aaf87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'
                                ],
                                materials: ['Laine', 'Coton'],
                                colors: ['Beige', 'Bleu', 'Rouge'],
                                variants: [
                                    {
                                        type: 'Taille',
                                        options: [
                                            { value: '160x230 cm', price: 0 },
                                            { value: '200x290 cm', price: 200 },
                                            { value: '240x340 cm', price: 350 }
                                        ]
                                    }
                                ],
                                dimensions: {
                                    length: 230,
                                    width: 160,
                                    height: 1,
                                    weight: 8
                                },
                                created_at: '2023-03-25'
                            }
                        ];
                        
                        // Mock categories
                        categories.value = [
                            { id: 1, name: 'Canapés' },
                            { id: 2, name: 'Banquettes' },
                            { id: 3, name: 'Lits' },
                            { id: 4, name: 'Tables' },
                            { id: 5, name: 'Chaises' },
                            { id: 6, name: 'Bibliothèques' },
                            { id: 7, name: 'Tapis' }
                        ];
                        
                        showToast('Produits chargés avec succès', 'success');
                    } catch (error) {
                        console.error('Error fetching products:', error);
                        showToast('Erreur lors du chargement des produits', 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const loadCart = () => {
                    const savedCart = localStorage.getItem('luxesalon_cart');
                    if (savedCart) {
                        cart.value = JSON.parse(savedCart);
                    }
                };
                
                const saveCart = () => {
                    localStorage.setItem('luxesalon_cart', JSON.stringify(cart.value));
                };
                
                const filterByCategory = (categoryId) => {
                    activeFilters.value.category = categoryId;
                    currentPage.value = 1;
                };
                
                const clearCategoryFilter = () => {
                    activeFilters.value.category = null;
                    currentPage.value = 1;
                };
                
                const applyFilters = () => {
                    currentPage.value = 1;
                };
                
                const resetFilters = () => {
                    activeFilters.value = {
                        category: null,
                        material: '',
                        color: '',
                        maxPrice: 5000
                    };
                    currentPage.value = 1;
                };
                
                const searchProducts = () => {
                    currentPage.value = 1;
                };
                
                const sortProducts = () => {
                    currentPage.value = 1;
                };
                
                const changePage = (page) => {
                    if (page >= 1 && page <= totalPages.value) {
                        currentPage.value = page;
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                };
                
                const viewProductDetail = (product) => {
                    selectedProduct.value = product;
                    selectedVariantOptions.value = {};
                    quantity.value = 1;
                    currentView.value = 'product-detail';
                };
                
                const selectVariantOption = (variantType, optionValue) => {
                    selectedVariantOptions.value[variantType] = optionValue;
                };
                
                const increaseQuantity = () => {
                    if (quantity.value < selectedProduct.value.stock) {
                        quantity.value++;
                    }
                };
                
                const decreaseQuantity = () => {
                    if (quantity.value > 1) {
                        quantity.value--;
                    }
                };
                
                const addToCart = () => {
                    if (!selectedProduct.value) return;
                    
                    // Build variant description
                    let variantDesc = '';
                    if (selectedProduct.value.variants && selectedProduct.value.variants.length > 0) {
                        variantDesc = Object.entries(selectedVariantOptions.value)
                            .map(([type, value]) => `${type}: ${value}`)
                            .join(', ');
                    }
                    
                    // Check if item with same variant already in cart
                    const existingItem = cart.value.find(item => 
                        item.id === selectedProduct.value.id && 
                        item.variant === variantDesc
                    );
                    
                    if (existingItem) {
                        existingItem.quantity += quantity.value;
                    } else {
                        cart.value.push({
                            id: selectedProduct.value.id,
                            name: selectedProduct.value.name,
                            price: selectedProduct.value.price,
                            image: selectedProduct.value.images[0],
                            quantity: quantity.value,
                            variant: variantDesc
                        });
                    }
                    
                    saveCart();
                    showToast('Produit ajouté au panier', 'success');
                    currentView.value = 'cart';
                };
                
                const updateCartItemQuantity = (index, newQuantity) => {
                    if (newQuantity < 1) newQuantity = 1;
                    cart.value[index].quantity = newQuantity;
                    saveCart();
                };
                
                const removeFromCart = (index) => {
                    cart.value.splice(index, 1);
                    saveCart();
                    showToast('Produit retiré du panier', 'info');
                };
                
                const applyPromoCode = () => {
                    if (promoCode.value.toUpperCase() === 'LUXE10') {
                        discountApplied.value = true;
                        discountAmount.value = 10;
                        promoError.value = '';
                        showToast('Code promo appliqué : 10% de réduction', 'success');
                    } else if (promoCode.value.toUpperCase() === 'LUXE20') {
                        discountApplied.value = true;
                        discountAmount.value = 20;
                        promoError.value = '';
                        showToast('Code promo appliqué : 20% de réduction', 'success');
                    } else {
                        discountApplied.value = false;
                        promoError.value = 'Code promo invalide';
                        showToast('Code promo invalide', 'error');
                    }
                };
                
                const validateCheckoutForm = () => {
                    let isValid = true;
                    checkoutErrors.value = {};
                    
                    if (!checkoutForm.value.firstName) {
                        checkoutErrors.value.firstName = 'Veuillez entrer votre prénom';
                        isValid = false;
                    }
                    
                    if (!checkoutForm.value.lastName) {
                        checkoutErrors.value.lastName = 'Veuillez entrer votre nom';
                        isValid = false;
                    }
                    
                    if (!checkoutForm.value.email) {
                        checkoutErrors.value.email = 'Veuillez entrer votre email';
                        isValid = false;
                    } else if (!/^\S+@\S+\.\S+$/.test(checkoutForm.value.email)) {
                        checkoutErrors.value.email = 'Veuillez entrer un email valide';
                        isValid = false;
                    }
                    
                    if (!checkoutForm.value.address) {
                        checkoutErrors.value.address = 'Veuillez entrer votre adresse';
                        isValid = false;
                    }
                    
                    if (!checkoutForm.value.city) {
                        checkoutErrors.value.city = 'Veuillez entrer votre ville';
                        isValid = false;
                    }
                    
                    if (!checkoutForm.value.state) {
                        checkoutErrors.value.state = 'Veuillez sélectionner votre région';
                        isValid = false;
                    }
                    
                    if (!checkoutForm.value.zip) {
                        checkoutErrors.value.zip = 'Veuillez entrer votre code postal';
                        isValid = false;
                    }
                    
                    if (!checkoutForm.value.phone) {
                        checkoutErrors.value.phone = 'Veuillez entrer votre téléphone';
                        isValid = false;
                    }
                    
                    if (!checkoutForm.value.acceptTerms) {
                        showToast('Veuillez accepter les conditions générales', 'error');
                        isValid = false;
                    }
                    
                    return isValid;
                };
                
                const placeOrder = async () => {
                    if (!validateCheckoutForm()) return;
                    
                    processingOrder.value = true;
                    
                    try {
                        // In a real app, this would be an API call
                        // const response = await axios.post('/api/orders', {
                        //     customer: checkoutForm.value,
                        //     items: cart.value,
                        //     total: total.value,
                        //     discount: discountApplied.value ? discountAmount.value : 0
                        // });
                        
                        // Mock response
                        const orderId = Math.floor(Math.random() * 90000) + 10000;
                        
                        // Calculate delivery date (3-5 days from now)
                        const deliveryDate = new Date();
                        deliveryDate.setDate(deliveryDate.getDate() + (checkoutForm.value.deliveryMethod === 'standard' ? 4 : 2));
                        
                        orderConfirmation.value = {
                            orderId,
                            email: checkoutForm.value.email,
                            total: total.value,
                            paymentMethod: checkoutForm.value.paymentMethod === 'credit' ? 'Carte de crédit' : 
                                          checkoutForm.value.paymentMethod === 'paypal' ? 'PayPal' : 'Virement bancaire',
                            date: new Date().toLocaleDateString('fr-FR'),
                            deliveryDate: deliveryDate.toLocaleDateString('fr-FR', { 
                                weekday: 'long', 
                                day: 'numeric', 
                                month: 'long' 
                            })
                        };
                        
                        // Clear
</html>